@using Microsoft.AspNetCore.Identity
@inject SignInManager<IdentityUser> SignInManager
@inject UserManager<IdentityUser> UserManager
@{
    ViewData["Title"] = "Home";
}

<div class="home-container">
    @if (SignInManager.IsSignedIn(User))
    {
        <div class="welcome-section">
            <div class="game-section">
                <h2>Hello, @User.Identity.Name!</h2>
                <p>Enjoy a quick game of Flappy Bird!</p>
                
                <div class="game-container">
                    <iframe src="https://hazavi.github.io/Flappy/" title="Flappy Bird Game" class="flappy-game"></iframe>
                </div>
                
                <p class="game-instruction">Press SPACE to jump and avoid the pipes!</p>
            </div>
        </div>
    }
    else
    {
        <div class="hero-section">
            <div class="hero-content">
                <h1 class="hero-title">Welcome to TestOgSikkerhed</h1>
                <p class="hero-subtitle">Authentication and Authorization Web App Test</p>
                
                <div class="cta-buttons">
                    <a asp-area="Identity" asp-page="/Account/Login" class="btn btn-primary btn-lg">Log In</a>
                    <a asp-area="Identity" asp-page="/Account/Register" class="btn btn-outline-primary btn-lg">Sign Up</a>
                </div>
            </div>
            
            <div class="hero-image" style="flex: 0 0 auto; width: 550px; text-align: center; border-radius: 10px; padding: 15px; overflow: hidden; margin-top: 70px;">
                <img src="~/images/security.jpg" alt="Security Illustration" style="max-width: 100%; height: auto; display: block; margin: 0 auto;" onerror="this.src='https://via.placeholder.com/250x250?text=Security+First';this.onerror='';">
            </div>
        </div>
    }
</div>

@section Scripts {
    <script>
        // Add Font Awesome for icons if not already included in _Layout.cshtml
        if (!document.querySelector('link[href*="font-awesome"]')) {
            const fontAwesome = document.createElement('link');
            fontAwesome.rel = 'stylesheet';
            fontAwesome.href = 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css';
            document.head.appendChild(fontAwesome);
        }
    </script>
}